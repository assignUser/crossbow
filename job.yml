!Job
target: !Target
  head: 9fd1c024392207bc3622da6a3307c06272efbc4c
  email: unknown
  branch: ARROW-14211-hash-join-tsan
  remote: https://github.com/michalursa/arrow.git
  version: 6.0.0.dev501
  no_rc_version: 6.0.0.dev501
  no_rc_semver_version: 6.0.0-dev501
tasks:
  test-debian-11-cpp: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        DEBIAN: 11
      image: debian-cpp

    branch: actions-994-github-test-debian-11-cpp
    commit: c26ba196261f19cc7aae68677069b311b4f2efb6
  conda-osx-clang-py36-r40: !Task
    ci: azure
    template: conda-recipes/azure.osx.yml
    artifacts:
    - arrow-cpp-6.0.0.dev501-py36(h[a-z0-9]+)_0_cpu.tar.bz2
    - pyarrow-6.0.0.dev501-py36(h[a-z0-9]+)_0_cpu.tar.bz2
    params:
      config: osx_64_numpy1.17python3.6.____cpython
      r_config: osx_64_r_base4.0
    branch: actions-994-azure-conda-osx-clang-py36-r40
    commit: 43a3289e89625f094b8cf4f81d2676ea74192b75
  test-ubuntu-20.04-cpp: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 20.04
      image: ubuntu-cpp

    branch: actions-994-github-test-ubuntu-20.04-cpp
    commit: 6cf9a10d2d8421531d0019cf03934fe9de0009f9
  test-r-offline-minimal: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rocker
      r_image: r-base
      r_tag: latest
      flags: -e TEST_OFFLINE_BUILD=true

    branch: actions-994-azure-test-r-offline-minimal
    commit: 7b9b2ff109666c60516669c0b994ca66e160f3b1
  test-ubuntu-20.04-cpp-14: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 20.04
      flags: -e CMAKE_ARGS=-DCMAKE_CXX_STANDARD=14
      image: ubuntu-cpp
    branch: actions-994-github-test-ubuntu-20.04-cpp-14
    commit: 1fdfa6e257959daeee51fd73349959e02c0e21b9
  test-ubuntu-18.04-cpp-release: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 18.04
      flags: -e ARROW_BUILD_TYPE=release
      image: ubuntu-cpp

    branch: actions-994-github-test-ubuntu-18.04-cpp-release
    commit: 2c69dcc865ba74c5dc2d3df0be26fb67fc249e26
  test-r-rhub-debian-gcc-devel-lto-latest: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rhub
      r_image: debian-gcc-devel-lto
      r_tag: latest
      flags: -e NOT_CRAN=false -e INSTALL_ARGS=--use-LTO

  # This one has -flto=auto
    branch: actions-994-azure-test-r-rhub-debian-gcc-devel-lto-latest
    commit: 6e752d363bfcf3149cdf6de5ed75bb5fcdaed74f
  test-conda-cpp: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      image: conda-cpp
    branch: actions-994-github-test-conda-cpp
    commit: ce4a30bdf414bf1914cec7fba0786e83ac0eea32
  homebrew-r-autobrew: !Task
    ci: github
    template: r/github.macos.autobrew.yml
    artifacts: []
    params: {}
    branch: actions-994-github-homebrew-r-autobrew
    commit: 3154f143c201ad008c2743128e20e9df79a5ddb9
  test-r-gcc-11: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 21.04
        CLANG_TOOLS: 9 # can remove this when >=9 is the default
        GCC_VERSION: 11
      # S3 support is not buildable with gcc11 right now
      flags: -e ARROW_SOURCE_HOME="/arrow" -e FORCE_BUNDLED_BUILD=TRUE -e LIBARROW_BUILD=TRUE
        -e ARROW_S3=OFF
      image: ubuntu-r-only-r

    branch: actions-994-github-test-r-gcc-11
    commit: c38a05da15a0ffe38685bd02544d81d1feeb39f8
  test-r-rstudio-r-base-3.6-opensuse15: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rstudio
      r_image: r-base
      r_tag: 3.6-opensuse15
    branch: actions-994-azure-test-r-rstudio-r-base-3.6-opensuse15
    commit: 02d9dddb2ff409d6ea55f9ca4fed3b7e871d2341
  test-r-depsource-system: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 21.04
        CLANG_TOOLS: 9 # can remove this when >=9 is the default
      flags: -e ARROW_SOURCE_HOME="/arrow" -e FORCE_BUNDLED_BUILD=TRUE -e LIBARROW_BUILD=TRUE
        -e ARROW_DEPENDENCY_SOURCE=SYSTEM
      image: ubuntu-r-only-r

    branch: actions-994-github-test-r-depsource-system
    commit: 489dcc4b1d916dd7daa54d9e0e14758d69863424
  test-ubuntu-20.04-cpp-17: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 20.04
      flags: -e CMAKE_ARGS=-DCMAKE_CXX_STANDARD=17
      image: ubuntu-cpp

    branch: actions-994-github-test-ubuntu-20.04-cpp-17
    commit: 788928394837c403f6ee87d8388cfc7892f19d07
  test-r-rstudio-r-base-3.6-centos7-devtoolset-8: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rstudio
      r_image: r-base
      r_tag: 3.6-centos7
      devtoolset_version: 8

    branch: actions-994-azure-test-r-rstudio-r-base-3.6-centos7-devtoolset-8
    commit: 61f6287b9aa2daa1ba0dc491dbe605ca987b1163
  conda-linux-gcc-py37-cpu-r41: !Task
    ci: azure
    template: conda-recipes/azure.linux.yml
    artifacts:
    - arrow-cpp-6.0.0.dev501-py37(h[a-z0-9]+)_0_cpu.tar.bz2
    - pyarrow-6.0.0.dev501-py37(h[a-z0-9]+)_0_cpu.tar.bz2
    params:
      config: linux_64_cuda_compiler_versionNonenumpy1.17python3.7.____cpython
      r_config: linux_64_r_base4.1
    branch: actions-994-azure-conda-linux-gcc-py37-cpu-r41
    commit: 8ef70454890b49be9c9cb8f7222a9eaa708e472a
  conda-win-vs2017-py37-r41: !Task
    ci: azure
    template: conda-recipes/azure.win.yml
    artifacts:
    - arrow-cpp-6.0.0.dev501-py37(h[a-z0-9]+)_0_cpu.tar.bz2
    - pyarrow-6.0.0.dev501-py37(h[a-z0-9]+)_0_cpu.tar.bz2
    params:
      config: win_64_cuda_compiler_versionNonenumpy1.17python3.7.____cpython
      r_config: win_64_r_base4.1
    branch: actions-994-azure-conda-win-vs2017-py37-r41
    commit: a33c4a88ef2899337056a5dc2045fdc8c3ceefd3
  test-r-linux-rchk: !Task
    ci: github
    template: r/github.linux.rchk.yml
    artifacts: []
    params: {}
    branch: actions-994-github-test-r-linux-rchk
    commit: 3146abafa176c347a74e302005fc37c74e8902d2
  test-r-linux-as-cran: !Task
    ci: github
    template: r/github.linux.cran.yml
    artifacts: []
    params:
      MATRIX: ${{ matrix.r_image }}

    branch: actions-994-github-test-r-linux-as-cran
    commit: 9c0a7c32bc6b2a512bee01d38115c91cfb6adcf9
  test-r-offline-maximal: !Task
    ci: github
    template: r/github.linux.offline.build.yml
    artifacts: []
    params: {}
    branch: actions-994-github-test-r-offline-maximal
    commit: 1ecaee0dce7ccaf23e633d27724778e3f48f9dcb
  test-fedora-33-cpp: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        FEDORA: 33
      image: fedora-cpp

    branch: actions-994-github-test-fedora-33-cpp
    commit: 84e1e63fcde54ea1f75d1d5aa5a885a1f8f0e144
  test-r-ubuntu-21.04: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 21.04
        CLANG_TOOLS: 9 # can remove this when >=9 is the default
      flags: -e ARROW_SOURCE_HOME="/arrow" -e FORCE_BUNDLED_BUILD=TRUE -e LIBARROW_BUILD=TRUE
      image: ubuntu-r-only-r

  # This also has -flto=auto
    branch: actions-994-github-test-r-ubuntu-21.04
    commit: 3c616481b4f9e97a01f718c28360a6b66d5b976f
  test-r-rstudio-r-base-3.6-opensuse42: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rstudio
      r_image: r-base
      r_tag: 3.6-opensuse42

  # This is with R built with --enable-lto
  # CRAN also does R CMD INSTALL --use-LTO
  # which overrides the UseLTO field in r/DESCRIPTION
    branch: actions-994-azure-test-r-rstudio-r-base-3.6-opensuse42
    commit: d9c5323a7c7da26ab8c77a621774bb7947af8a65
  test-ubuntu-18.04-r-sanitizer: !Task
    ci: azure
    template: docker-tests/azure.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 18.04
      run: ubuntu-r-sanitizer

    branch: actions-994-azure-test-ubuntu-18.04-r-sanitizer
    commit: 1fb950505b0df4f33526c435d0a0f476cefe5d0a
  test-conda-cpp-valgrind: !Task
    ci: azure
    template: docker-tests/azure.linux.yml
    artifacts: []
    params:
      run: conda-cpp-valgrind

    branch: actions-994-azure-test-conda-cpp-valgrind
    commit: 02606a2da822a699543951c68a76c46cc8b45cae
  test-r-minimal-build: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rocker
      r_image: r-base
      r_tag: latest
      flags: -e LIBARROW_MINIMAL=TRUE

    branch: actions-994-azure-test-r-minimal-build
    commit: c70b797d5e829f0f20e49fbb39b1d408f23b9b6f
  test-r-install-local: !Task
    ci: github
    template: r/github.macos-linux.local.yml
    artifacts: []
    params: {}
    branch: actions-994-github-test-r-install-local
    commit: af2140051a5fbe6702ce6e6ad700d8805409a6ca
  test-r-arrow-backwards-compatibility: !Task
    ci: github
    template: r/github.linux.arrow.version.back.compat.yml
    artifacts: []
    params: {}
    branch: actions-994-github-test-r-arrow-backwards-compatibility
    commit: a5662e947607547a0e45306b80988bb4e7a25caa
  test-r-devdocs: !Task
    ci: github
    template: r/github.devdocs.yml
    artifacts: []
    params: {}
    branch: actions-994-github-test-r-devdocs
    commit: 06b78aa3d311966d0497014803aab2bbf69e12f7
  test-ubuntu-20.04-cpp-thread-sanitizer: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        # clang-tools and llvm version need to be synchronized so as
        # to have the right llvm-symbolizer version
        CLANG_TOOLS: 11
        LLVM: 11
        UBUNTU: 20.04
      image: ubuntu-cpp-thread-sanitizer

    branch: actions-994-github-test-ubuntu-20.04-cpp-thread-sanitizer
    commit: ef833313e6b72ebe2b07f8aa01ecb715ebb3cafd
  test-r-depsource-auto: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rocker
      r_image: r-base
      r_tag: latest
      flags: -e ARROW_DEPENDENCY_SOURCE=AUTO

    branch: actions-994-azure-test-r-depsource-auto
    commit: 5a0b20d6f9ec2d2703c68dbaf516c7ac4922f264
  conda-linux-gcc-py36-cpu-r40: !Task
    ci: azure
    template: conda-recipes/azure.linux.yml
    artifacts:
    - arrow-cpp-6.0.0.dev501-py36(h[a-z0-9]+)_0_cpu.tar.bz2
    - pyarrow-6.0.0.dev501-py36(h[a-z0-9]+)_0_cpu.tar.bz2
    params:
      config: linux_64_cuda_compiler_versionNonenumpy1.17python3.6.____cpython
      r_config: linux_64_r_base4.0
    branch: actions-994-azure-conda-linux-gcc-py36-cpu-r40
    commit: 2c3886e0a41040a2969d8a2f11a10cdcbe747831
  conda-osx-clang-py37-r41: !Task
    ci: azure
    template: conda-recipes/azure.osx.yml
    artifacts:
    - arrow-cpp-6.0.0.dev501-py37(h[a-z0-9]+)_0_cpu.tar.bz2
    - pyarrow-6.0.0.dev501-py37(h[a-z0-9]+)_0_cpu.tar.bz2
    params:
      config: osx_64_numpy1.17python3.7.____cpython
      r_config: osx_64_r_base4.1
    branch: actions-994-azure-conda-osx-clang-py37-r41
    commit: 75df7cdd910bc001556a0ca627b90b1dd3c18199
  test-ubuntu-18.04-cpp-static: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 18.04
      flags: -e ARROW_BUILD_SHARED=OFF -e ARROW_BUILD_STATIC=ON -e ARROW_TEST_LINKAGE=static
      image: ubuntu-cpp

    branch: actions-994-github-test-ubuntu-18.04-cpp-static
    commit: f89598e6fcb76ce16121758951f8970a4abf3192
  conda-win-vs2017-py36-r40: !Task
    ci: azure
    template: conda-recipes/azure.win.yml
    artifacts:
    - arrow-cpp-6.0.0.dev501-py36(h[a-z0-9]+)_0_cpu.tar.bz2
    - pyarrow-6.0.0.dev501-py36(h[a-z0-9]+)_0_cpu.tar.bz2
    params:
      config: win_64_cuda_compiler_versionNonenumpy1.17python3.6.____cpython
      r_config: win_64_r_base4.0
    branch: actions-994-azure-conda-win-vs2017-py36-r40
    commit: ded95157e54815a3b2b92fe1587041e39c39a4c9
  test-r-rhub-ubuntu-gcc-release-latest: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rhub
      r_image: ubuntu-gcc-release
      r_tag: latest
    branch: actions-994-azure-test-r-rhub-ubuntu-gcc-release-latest
    commit: 45a2ea9d4b5044c1fd22d756a89123e6f913d9b1
  test-r-rstudio-r-base-3.6-bionic: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rstudio
      r_image: r-base
      r_tag: 3.6-bionic
    branch: actions-994-azure-test-r-rstudio-r-base-3.6-bionic
    commit: 4e311c70d2039e4c59c7cb448732dd1583764703
  test-r-versions: !Task
    ci: github
    template: r/github.linux.versions.yml
    artifacts: []
    params:
      MATRIX: ${{ matrix.r_version }}

    branch: actions-994-github-test-r-versions
    commit: 8dcd6a9d5b0277fed320bf710d2df39c928ad950
  test-r-rocker-r-base-latest: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rocker
      r_image: r-base
      r_tag: latest
    branch: actions-994-azure-test-r-rocker-r-base-latest
    commit: d566025b25745fb940e57829a675a2a030c7a908
  test-ubuntu-18.04-cpp: !Task
    ci: github
    template: docker-tests/github.linux.yml
    artifacts: []
    params:
      env:
        UBUNTU: 18.04
      image: ubuntu-cpp
    branch: actions-994-github-test-ubuntu-18.04-cpp
    commit: e069f253e07adf2469cd06d9b9b8492565439856
  test-r-rstudio-r-base-3.6-centos8: !Task
    ci: azure
    template: r/azure.linux.yml
    artifacts: []
    params:
      r_org: rstudio
      r_image: r-base
      r_tag: 3.6-centos8
    branch: actions-994-azure-test-r-rstudio-r-base-3.6-centos8
    commit: ea3ff073033c1cf9b3e1202bed6f9932da2a5a6f
  test-r-linux-valgrind: !Task
    ci: azure
    template: docker-tests/azure.linux.yml
    artifacts: []
    params:
      env:
        ARROW_R_DEV: 'TRUE'
        UBUNTU: 18.04
      run: ubuntu-r-valgrind

    branch: actions-994-azure-test-r-linux-valgrind
    commit: 8da0510091ed0375ec831d06d06475819f3702c1
params: {}
branch: actions-994
